//! capataz-inveniemus 0.0.2

(function(a){"use strict";"function"==typeof define&&define.amd?define(["creatartis-base","sermat","capataz","inveniemus"],a):"object"==typeof exports&&module.exports?module.exports=a(require("creatartis-base"),require("sermat"),require("capataz"),require("inveniemus")):this["capataz-inveniemus"]=a(this.base,this.Sermat,this.capataz,this.inveniemus)}).call(this,function a(b,c,d,e){"use strict";var f=b.raiseIf,g={__package__:"capataz-inveniemus",__name__:"capataz_inveniemus",__init__:a,__dependencies__:[b,c,d,e]};return g.capataz=d,g.inveniemus=e,g.distributeEvaluation=function(){function a(a){return a=Object.assign({problemDependencies:[],fun:"function (problem, element) {\n\treturn problem.evaluation(element);\n}",keepRunning:!1},a),f("object"!=typeof a.server,"Invalid `server`!"),f("object"!=typeof a.mh,"Invalid `metaheuristics`!"),f("function"!=typeof a.problemBuilder,"Invalid `problemBuilder`!"),f(!Array.isArray(a.problemDependencies),"Invalid `problemDependencies`!"),f("function"!=typeof a.fun&&"string"!=typeof a.fun,"Invalid `jobPrototype.fun`!"),a}function b(a){var b=a.server,d="function () {\n\tvar Sermat = arguments[0],\n\t\tinveniemus = arguments[1];\n\tSermat.include(base);\n\targuments[arguments.length-1] = Sermat.mat(arguments[arguments.length-1]);\n\treturn ("+a.fun+").apply(this, Array.prototype.slice.call(arguments, 2));\n}";return function(){var a=this;return b.schedule({info:this.emblem(),imports:["sermat","inveniemus","problem"],args:[c.ser(this,{mode:c.CIRCULAR_MODE})],fun:d}).then(function(b){return a.evaluation=Array.isArray(b)?b:isNaN(b)?null:[+b],b})}}return function(c){function d(){return i||(f.logger.info("Stopping server."),setTimeout(process.exit,10)),g}c=a(c);var f=c.server,g=c.mh,h=g.problem;h||(h=c.problemBuilder.apply(null,c.problemDependencies.map(require)),g.problem=h),f.__serveRequireModule__(c.problemBuilder,"problem",c.problemDependencies),f.__serveNodeModule__(e),h.Element.prototype.evaluate=b(c),g.events.on("advanced",function(){var a=g.statistics.stat({key:"evaluation",step:g.step}),b=g.state[0];f.logger.info("Advanced to step #"+g.step+". Evaluations "+a.minimum()+" < "+a.average()+" < "+a.maximum()+" (stddev: "+a.standardDeviation()+")."),f.logger.info("\tBest so far: "+b.emblem()+".")});var i=!!c.keepRunning;return g.run().then(function(){return f.logger.info("Finished."),d()},function(a){return f.logger.error(a+""),d()})}}(),g});
//# sourceMappingURL=capataz-inveniemus.min.js.map