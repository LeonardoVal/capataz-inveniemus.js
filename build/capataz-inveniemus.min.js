//! capataz-inveniemus 0.0.1

(function(a){"use strict";"function"==typeof define&&define.amd?define(["creatartis-base","sermat","capataz","inveniemus"],a):"object"==typeof exports&&module.exports?module.exports=a(require("creatartis-base"),require("sermat"),require("capataz"),require("inveniemus")):this.Sermat=a(this.base,this.Sermat,this.capataz,this.undefined)}).call(this,function a(b,c,d,e){"use strict";var f=b.raiseIf,g={__package__:"capataz-inveniemus",__name__:"capataz_inveniemus",__init__:a,__dependencies__:[b,c,d,e]};return g.capataz=d,g.inveniemus=e,g.distributeEvaluation=function(){function a(a){return a=Object.assign({problemDependencies:[],fun:"function (problem, element) {\n\treturn problem.evaluation(element);\n}",keepRunning:!1},a),f("object"!=typeof a.server,"Invalid `server`!"),f("object"!=typeof a.mh,"Invalid `metaheuristics`!"),f("function"!=typeof a.problemBuilder,"Invalid `problemBuilder`!"),f(!Array.isArray(a.problemDependencies),"Invalid `problemDependencies`!"),f("function"!=typeof a.fun&&"string"!=typeof a.fun,"Invalid `jobPrototype.fun`!"),a}function b(a){var b=a.server,d="function () {\n\tvar Sermat = arguments[0],\n\t\tinveniemus = arguments[1];\n\tSermat.include(base);\n\targuments[arguments.length-1] = Sermat.mat(arguments[arguments.length-1]);\n\treturn ("+a.fun+").apply(this, Array.prototype.slice.call(arguments, 2));\n}";return function(){var a=this;return b.schedule({info:this.emblem(),imports:["sermat","inveniemus","problem"],args:[c.ser(this,{mode:c.CIRCULAR_MODE})],fun:d}).then(function(b){return a.evaluation=Array.isArray(b)?b:isNaN(b)?null:[+b],b})}}return function(c){function d(){return h||(e.logger.info("Stopping server."),setTimeout(process.exit,10)),f}c=a(c);var e=c.server,f=c.mh,g=f.problem;g||(g=c.problemBuilder.apply(null,c.problemDependencies.map(require)),f.problem=g),e.expressApp.get(e.config.staticRoute+"/problem.js",function(a,b){b.send("define("+JSON.stringify(c.problemDependencies)+", "+c.problemBuilder+");")}),g.Element.prototype.evaluate=b(c),f.events.on("advanced",function(){var a=f.statistics.stat({key:"evaluation",step:f.step}),b=f.state[0];e.logger.info("Advanced to step #"+f.step+". Evaluations "+a.minimum()+" < "+a.average()+" < "+a.maximum()+". Best so far: "+b.emblem()+".")});var h=!!c.keepRunning;return f.run().then(function(){return e.logger.info("Finished."),d()},function(a){return e.logger.error(a+""),d()})}}(),g});
//# sourceMappingURL=capataz-inveniemus.min.js.map